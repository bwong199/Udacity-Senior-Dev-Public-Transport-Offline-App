$(document).ready(function(){var t="https://transit.land/api/v1/stops",a=setTimeout(function(){alert("failed to get transit data")},4e3);$.ajax({url:t,dataType:"json",jsonp:"callback",success:function(t){var e=t.stops;for(var i in e){var r=e[i].name,n=e[i].onestop_id;$("#departureOption").append('<option value="'+n+'">'+r+"</option>")}clearTimeout(a)}}),$("#departureBtn").click(function(t){$("#departure").text(" "),t.preventDefault(),$("p").empty();var e=$("#departureOption option:selected").val(),i="https://transit.land/api/v1/schedule_stop_pairs?origin_onestop_id="+e;$.ajax({url:i,dataType:"json",jsonp:"callback",success:function(t){var e=[],i=[],r=[],n=t.schedule_stop_pairs;for(var p in n){var o=n[p].destination_onestop_id,s=(n[p].destination_departure_time,n[p].destination_arrival_time,n[p].origin_departure_time,n[p].origin_arrival_time,n[p].trip_headsign);i.push(s),i.push(o),e.push(i)}i=jQuery.unique(i),r=jQuery.unique(r),e=jQuery.unique(e);for(x in e)$("#arrivalOption").append('<option value="'+e[x][1]+'">'+e[x][0]+"</option>");clearTimeout(a)}})}),$("#arrivalBtn").click(function(t){$("p").empty(),t.preventDefault();var e=$("#arrivalOption option:selected").val(),i="https://transit.land/api/v1/schedule_stop_pairs?origin_onestop_id="+e;$.ajax({url:i,dataType:"json",jsonp:"callback",success:function(t){var e=t.schedule_stop_pairs,i=[];for(var r in e){var n=e[r].origin_departure_time,p=(e[r].origin_arrival_time,e[r].destination_departure_time,e[r].destination_arrival_time);$("#departure").append(n+"<br>"),$("#arrival").append(p+"<br>");var o=[];o.push(n),o.push(p),i.push(o)}for(x in i){var s=String(i[x]).substring(12,14)-String(i[x]).substring(3,5);s<0&&(s+=60),$("#duration").append(s+" mins<br>")}clearTimeout(a)}})})});